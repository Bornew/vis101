<!DOCTYPE html>
<html lang="en">
<head>
<style>

.node {
  font: 300 11px "Helvetica Neue", Helvetica, Arial, sans-serif;
  fill: #bbb;
}

.node:hover {
  fill: #000;
}

.link {
  stroke: steelblue;
  stroke-opacity: 0.4;
  fill: none;
  pointer-events: none;
}

.node:hover,
.node--source,
.node--target {
  font-weight: 700;
}

.node--source {
  fill: #2ca02c;
}

.node--target {
  fill: #d62728;
}

.link--source,
.link--target {
  stroke-opacity: 1;
  stroke-width: 2px;
}

.link--source {
  stroke: #d62728;
}

.link--target {
  stroke: #2ca02c;
}

</style>

	<meta charset="UTF-8">
	<title>Bundle Graph</title>
</head>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script type="text/javascript">
// 定义svg尺寸并创建svg
var width = 1280
var height = 720
var svg = d3.select("body")
		.append("svg")
			.attr("width", width)
			.attr("height", height);

// 定义直径半径
var diameter = 720,
    radius = diameter / 2,
    innerRadius = radius - 100;

// 定义cluster，使用极坐标
var cluster = d3.cluster()
				.size([360, innerRadius])

// 定义颜色比例尺
var color = d3.scaleOrdinal(d3.schemeCategory20);

// 定义bundle曲线生成器
var bundle = d3.radialLine()
			.curve(d3.curveBundle.beta(0.5))
			.radius(function(d){ return d.y; })
			.angle(function(d){ return d.x /180 * Math.PI; })// angle : 0 -> -y方向 (12 o'clock)

// var link = svg.append("g").selectAll(".link");
// var node = svg.append("g").selectAll(".node");

d3.json("collapsible.json", function(error, data){
	if (error) { throw error; }

	var link = svg.append("g")
                  .attr("class", "link")
                .selectAll(".link");

  var node = svg.append("g")
                  .attr("class", "node")
                .selectAll(".node");

  var root = dataProcess(data);

  cluster()

  function dataProcess(data){
    console.log(data);
    return d3.hierarchy(data);
  }
});



</script>	
</body>
</html>
